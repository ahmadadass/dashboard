<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Pie Chart Example</title>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        async function drawChart() {
            // Create the data table.
                try {
                    const response = await fetch('/.netlify/functions/server', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({car: "thiscodeisnotforshaering"}),
                });

                const data = await response.json();
                console.log(data);
                } catch (error) {
                    console.error('Error calling serverless function:', error);
                    document.getElementById('response').textContent = 'An error occurred';
                }
            

            var data_values = google.visualization.arrayToDataTable([
                ['Month', 'Sales'],
                ['January', 1000],
                ['February', 1170],
                ['March', 660],
                ['April', 1030],
                ['May', 920]
            ]);
        

            // Set chart options for a pie chart
            var options = {
                title: 'Sales Distribution',
                is3D: true,  // Adds a 3D effect
                pieSliceText: 'value',
                slices: {
                    1: { offset: 0.1 },  // Offset a slice for emphasis
                },
                backgroundColor: '#f4f4f4',
                legend: { position: 'right' }
            };

            // Instantiate and draw the chart.
            var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
            chart.draw(data_values, options);
        }
    </script>
</head>
<body>
    <h1>Sales Distribution by Month</h1>
    <!--<form>
        <input type="text" id="text"/>
        <button id="get">GET</button>
        <button id="post">POST</button>
    </form>-->
    <div id="chart_div" style="width: 50%; height: 30%;"></div>
</body>
</html>
